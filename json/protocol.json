{
    "version": {
        "major": "0",
        "minor": "1"
    },
    "domains": [
        {
            "domain": "Recording",
            "description": "The Recording domain defines methods for managing recordings.",
            "types": [
                {
                    "id": "RecordingID",
                    "description": "Globally unique identifier for a recording.",
                    "type": "string"
                },
                {
                    "id": "BuildID",
                    "description": "Unique identifier for the software used to produce a recording.",
                    "type": "string"
                },
                {
                    "id": "TimeStamp",
                    "description": "A time which can be used in reference to a recording. This is the elapsed\ntime in seconds since the recording started.",
                    "type": "number"
                }
            ],
            "commands": [
                {
                    "name": "getRecordingDescription",
                    "description": "Get any available description for a recording, or an error if there is no\ndescription set.",
                    "parameters": [
                        {
                            "name": "recordingId",
                            "description": "Recording to get the description for.",
                            "$ref": "RecordingID"
                        }
                    ],
                    "returns": [
                        {
                            "name": "duration",
                            "description": "Duration of the recording.",
                            "$ref": "TimeStamp"
                        },
                        {
                            "name": "lastScreen",
                            "description": "Painted graphics at the end of the recording.",
                            "optional": true,
                            "$ref": "Graphics.ScreenShot"
                        }
                    ]
                },
                {
                    "name": "createSession",
                    "description": "Create a session for inspecting a recording.",
                    "parameters": [
                        {
                            "name": "recordingId",
                            "description": "Recording to load into the session.",
                            "$ref": "RecordingID"
                        }
                    ],
                    "returns": [
                        {
                            "name": "sessionId",
                            "description": "Identifier for the new session.",
                            "$ref": "Session.SessionID"
                        }
                    ]
                },
                {
                    "name": "releaseSession",
                    "description": "Release a session and allow its resources to be reclaimed.",
                    "parameters": [
                        {
                            "name": "sessionId",
                            "description": "Session to release.",
                            "$ref": "Session.SessionID"
                        }
                    ]
                }
            ]
        },
        {
            "domain": "Session",
            "description": "The Session domain defines methods for using recording sessions. In order to\ninspect a recording, it must first be loaded into a session via\n<code>Recording.createSession</code>.",
            "types": [
                {
                    "id": "SessionID",
                    "description": "Unique identifier for a session which a recording has been loaded into.",
                    "type": "string"
                }
            ]
        },
        {
            "domain": "Graphics",
            "description": "The Graphics domain defines methods for accessing a recording's graphics data.",
            "types": [
                {
                    "id": "MimeType",
                    "description": "Graphics encoding format.",
                    "$ref": "String",
                    "enum": [
                        "image/jpeg",
                        "image/png"
                    ]
                },
                {
                    "id": "ScreenShot",
                    "description": "Screen shot of the graphics rendered at some point.",
                    "type": "object",
                    "properties": [
                        {
                            "name": "mimeType",
                            "description": "Encoding used for the graphics data.",
                            "$ref": "MimeType"
                        },
                        {
                            "name": "data",
                            "description": "Raw graphics data encoded in base64.",
                            "type": "string"
                        }
                    ]
                }
            ]
        },
        {
            "domain": "Internal",
            "description": "The Internal domain is for use by Web Replay's own tools and other software.\nWhile use of this domain is not restricted, it won't be very helpful for other\nusers.",
            "commands": [
                {
                    "name": "log",
                    "description": "Add text to the server side log for this connection.",
                    "parameters": [
                        {
                            "name": "text",
                            "description": "Text to log. This must not contain identifying information about the\nuser or website being visited.",
                            "type": "string"
                        },
                        {
                            "name": "time",
                            "description": "Timestamp from Date.now() to associate with this logged text.",
                            "type": "integer"
                        }
                    ]
                },
                {
                    "name": "createRecording",
                    "description": "Create a new recording.",
                    "parameters": [
                        {
                            "name": "buildId",
                            "description": "Build ID of the software which produced the recording.",
                            "$ref": "Recording.BuildID"
                        }
                    ],
                    "returns": [
                        {
                            "name": "recordingId",
                            "description": "Identifier for the recording.",
                            "$ref": "Recording.RecordingID"
                        }
                    ]
                },
                {
                    "name": "addRecordingData",
                    "description": "Add data to a recording. The next message sent after this must be a binary\nmessage with the data described by this message. Uploaded recordings are not\nexplicitly finished; replay sessions created for a recording will include\nall data which was successfully uploaded.",
                    "parameters": [
                        {
                            "name": "recordingId",
                            "description": "ID of the recording data is being added to. This recording must have\nbeen produced by a createRecording command previously sent on this\nconnection.",
                            "$ref": "Recording.RecordingID"
                        },
                        {
                            "name": "offset",
                            "description": "Byte offset into the recording's blob of the data being sent.",
                            "type": "integer"
                        },
                        {
                            "name": "length",
                            "description": "Byte length of the data being sent.",
                            "type": "integer"
                        }
                    ]
                },
                {
                    "name": "addRecordingDescription",
                    "description": "Add metadata about a recording. This information is advisory and does not\nneed to be correct, but can be fetched and used when loading recordings for\nreplay (especially recordings that haven't finished uploading).",
                    "parameters": [
                        {
                            "name": "recordingId",
                            "description": "ID of the recording being described.",
                            "$ref": "Recording.RecordingID"
                        },
                        {
                            "name": "length",
                            "description": "Total byte length of the recording.",
                            "type": "integer"
                        },
                        {
                            "name": "duration",
                            "description": "Duration of the entire recording.",
                            "$ref": "Recording.TimeStamp"
                        },
                        {
                            "name": "lastScreen",
                            "description": "Painted graphics at the end of the recording.",
                            "optional": true,
                            "$ref": "Graphics.ScreenShot"
                        }
                    ]
                }
            ]
        }
    ]
}
